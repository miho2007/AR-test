<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AR.js Simulated VR</title>

<script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.js"></script>

<style>
html, body { margin:0; width:100%; height:100%; overflow:hidden; background:black; }

#cameraFeed {
  position: absolute;
  top:0; left:0;
  width:100%; height:100%;
  object-fit:cover;
  z-index:0;
}

.vr-container {
  position: absolute; top:0; left:0;
  width:100%; height:100%;
  display:flex; justify-content:center; align-items:center;
  z-index:1;
  pointer-events:none;
}

.vr-eye {
  width:52%;   /* slightly more than 50% for overlap */
  height:100%;
  overflow:hidden;
  position:relative;
}

.vr-eye.left { transform: translateX(-2%); }
.vr-eye.right { transform: translateX(2%); }

.vr-eye canvas { width:100%; height:100%; display:block; }

/* Mirror left eye for headset alignment */
.vr-eye.left a-scene { transform: scaleX(-1); }
</style>
</head>
<body>

<!-- Camera feed -->
<video id="cameraFeed" autoplay playsinline muted></video>

<!-- Split-screen VR -->
<div class="vr-container">
  <div class="vr-eye left"></div>
  <div class="vr-eye right"></div>
</div>

<!-- Single AR.js scene -->
<a-scene embedded vr-mode-ui="enabled: false"
         arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;">
  <a-marker preset="hiro">
    <a-box position="0 0.5 0" rotation="0 45 0" scale="0.5 0.5 0.5" color="red">
      <a-animation attribute="rotation" to="0 405 0" dur="3000" repeat="indefinite"></a-animation>
    </a-box>
  </a-marker>
  <a-entity camera></a-entity>
</a-scene>

<script>
const video = document.getElementById('cameraFeed');
navigator.mediaDevices.getUserMedia({ video: { facingMode:'environment' } })
  .then(stream => { video.srcObject = stream; })
  .catch(err => console.error('Camera error:', err));
</script>
</body>
</html>
