<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AR Cube Stable</title>
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.js"></script>
  <style>
    html, body { margin:0; width:100%; height:100%; overflow:hidden; background:black; }
    #start-btn {
      position:absolute; top:50%; left:50%; transform:translate(-50%, -50%);
      padding:20px 40px; font-size:20px; background:#00FF00; color:black; border:none; border-radius:8px; z-index:10;
    }
    #scene-container { width:100%; height:100%; display:none; }
  </style>
</head>
<body>

<button id="start-btn">Start AR</button>
<div id="scene-container"></div>

<script>
const btn = document.getElementById('start-btn');
const container = document.getElementById('scene-container');

btn.addEventListener('click', () => {
  // Hide button
  btn.style.display = 'none';

  // Create a-scene dynamically after user click
  const scene = document.createElement('a-scene');
  scene.setAttribute('embedded', '');
  scene.setAttribute('vr-mode-ui', 'enabled: false');
  scene.setAttribute('arjs', 'trackingMethod: best; sourceType: webcam; debugUIEnabled: false;');

  // Marker + cube
  const marker = document.createElement('a-marker');
  marker.setAttribute('preset', 'hiro');

  const box = document.createElement('a-box');
  box.setAttribute('position', '0 0.25 0');
  box.setAttribute('rotation', '0 45 0');
  box.setAttribute('scale', '0.2 0.2 0.2');
  box.setAttribute('color', 'red');

  // Optional rotation animation
  const anim = document.createElement('a-animation');
  anim.setAttribute('attribute', 'rotation');
  anim.setAttribute('to', '0 405 0');
  anim.setAttribute('dur', '3000');
  anim.setAttribute('repeat', 'indefinite');
  box.appendChild(anim);

  marker.appendChild(box);
  scene.appendChild(marker);

  // Camera
  const camera = document.createElement('a-entity');
  camera.setAttribute('camera', '');
  scene.appendChild(camera);

  // Lighting
  const ambient = document.createElement('a-entity');
  ambient.setAttribute('light', 'type: ambient; intensity: 0.5');
  scene.appendChild(ambient);

  const directional = document.createElement('a-entity');
  directional.setAttribute('light', 'type: directional; intensity: 0.5');
  directional.setAttribute('position', '0 1 1');
  scene.appendChild(directional);

  // Show container and attach scene
  container.style.display = 'block';
  container.appendChild(scene);
});
</script>

</body>
</html>
